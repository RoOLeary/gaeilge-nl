---
import EmailSignup from './Subscribe/EmailSignup.astro'
import MagicBento from './MagicBento'

export interface Props {
  title: string;
  date: string;
  hero: string;
  youtube: string;
  author: string;
  faq: any[];
}

const { title, date, hero, youtube, author, faq } = Astro.props;
---

<article class="max-w-5xl mx-auto px-3">
  <header class="mx-auto max-w-5xl text-center content">
    <h1 class="mb-4 greeting" data-test="header-title">{title}</h1>
    <p data-test="header-description">Blog Post</p>
  </header>
  <small>Author: {author}</small>
  <!-- Image -->
  {hero && (
    <img 
      class="rounded-xl mx-auto" 
      style="min-width: 80%; width: 100%; max-width: 800px;" 
      loading="eager" 
      src={hero} 
      alt={title}
      onerror="this.style.display='none'"
    />
  )}

  <!-- YouTube Video -->
  {youtube && (
    <div class="embed-responsive aspect-ratio-16/9 mt-6 lg:mt-12">
      <iframe 
        width="700" 
        height="500" 
        class="embed-responsive-item"
        src={`https://www.youtube.com/embed/${youtube}`} 
        frameborder="0"
        loading="lazy"
        allow="accelerometer; autoplay; encrypted-media; gyroscope;" 
        allowfullscreen
        title={`YouTube video for ${title}`}
        onerror="this.parentElement.parentElement.style.display='none'">
      </iframe>
    </div>
  )}

  <!-- Content -->
  <section class="max-w-3xl mx-auto py-6 lg:py-12 content">
    <slot />
    {faq && <section class="max-w-3xl mx-auto py-6 lg:py-12 content">
      <h2 class="text-2xl font-bold">FAQ</h2>
      <ul>
        {faq.map(q => <li><h2>{q.question}</h2><p>{q.answer}</p></li>)}
      </ul>
    </section>}
  </section>
  

  <EmailSignup />
</article>
